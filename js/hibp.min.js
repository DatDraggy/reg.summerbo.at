/**
 * hibp.js
 * @version v1
 * @author Mehdi Bounya
 *
 * Report any bugs here: https://github.com/mehdibo/hibp-js
 *
 * The MIT License (http://www.opensource.org/licenses/mit-license.php)
 */
function sha1(string){var buffer=new TextEncoder("utf-8").encode(string);return crypto.subtle.digest("SHA-1",buffer).then(function(buffer){var hexCodes=[];var view=new DataView(buffer);for(var i=0;i<view.byteLength;i+=4){var value=view.getUint32(i);var stringValue=value.toString(16);var padding='00000000';var paddedValue=(padding+stringValue).slice(-padding.length);hexCodes.push(paddedValue)}return hexCodes.join("")})}function hibpCheck(pwd){sha1(pwd).then(function(hash){const req=new XMLHttpRequest();req.addEventListener("load",function(){const resp=this.responseText.split('\n');const hashSub=hash.slice(5).toUpperCase();var result=false;for(index in resp){if(resp[index].substring(0,35)==hashSub){result=true;break;}}const event=new CustomEvent('hibpCheck',{detail:result});document.dispatchEvent(event)});req.open('GET','https://api.pwnedpasswords.com/range/'+hash.substr(0,5));req.send()})}